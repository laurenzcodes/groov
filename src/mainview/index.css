@import url("https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@500;600&family=IBM+Plex+Sans:wght@400;500;600;700&family=Rajdhani:wght@500;600;700&display=swap");

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
    --app-height: 100vh;
    --bg: #050607;
    --chrome-1: #101214;
    --chrome-2: #181b1f;
    --panel: #111418;
    --panel-soft: #15191d;
    --border: #2b3138;
    --border-soft: #232930;
    --text: #d4d8de;
    --muted: #9098a3;
    --accent: #37a4f2;
    --warn: #f2ab32;
    --danger: #ff6a66;
    font-family: "IBM Plex Sans", "Segoe UI", sans-serif;
}

* {
    box-sizing: border-box;
}

html,
body {
    width: 100%;
    height: 100%;
}

body {
    margin: 0;
    min-height: 0;
    color: var(--text);
    overflow: hidden;
    background:
        linear-gradient(180deg, rgba(255, 255, 255, 0.02), transparent 30%),
        repeating-linear-gradient(
            0deg,
            rgba(255, 255, 255, 0.02) 0,
            rgba(255, 255, 255, 0.02) 1px,
            transparent 1px,
            transparent 22px
        ), var(--bg);
}

#root {
    width: 100%;
    height: 100%;
    overflow: hidden;
}

.app-shell {
    height: var(--app-height);
    padding: 6px;
    overflow: hidden;
}

.app-frame {
    height: 100%;
    min-height: 0;
    min-width: 0;
    border: 1px solid var(--border);
    background: linear-gradient(180deg, #0b0d10, #080a0c);
    display: grid;
    grid-template-rows: auto minmax(0, 1fr) auto;
    overflow: hidden;
}

.top-bar {
    height: 52px;
    display: flex;
    justify-content: flex-start;
    align-items: center;
    padding: 6px 12px;
    border-bottom: 1px solid var(--border);
    background: linear-gradient(180deg, var(--chrome-2), var(--chrome-1));
}

.brand-kicker {
    margin: 0;
    font-family: "Rajdhani", sans-serif;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    font-size: 0.62rem;
    color: #8f97a3;
}

.top-bar h1 {
    margin: 0;
    font-size: clamp(0.95rem, 1.6vw, 1.18rem);
    font-family: "Rajdhani", sans-serif;
    letter-spacing: 0.05em;
    text-transform: uppercase;
}

.status-cluster {
    display: flex;
    gap: 6px;
}

.status-chip {
    border: 1px solid #39414a;
    background: #1b2026;
    color: #b4bcc6;
    border-radius: 2px;
    padding: 3px 8px;
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 0.09em;
}

.workspace {
    flex: 1;
    min-height: 0;
    display: grid;
    grid-template-columns: 256px minmax(0, 1fr);
    overflow: hidden;
}

.workspace > * {
    min-height: 0;
    min-width: 0;
}

.app-footer {
    min-height: 44px;
    border-top: 1px solid var(--border);
    background: linear-gradient(180deg, #11151a, #0d1116);
    display: grid;
    grid-template-columns: max-content minmax(0, 1fr) max-content;
    gap: 10px;
    align-items: center;
    padding: 6px 10px;
}

.app-footer-block {
    display: flex;
    align-items: center;
    gap: 9px;
    min-width: 0;
}

.app-footer-label {
    font-size: 0.58rem;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: #8b98a7;
    line-height: 1.3;
}

.app-footer-value {
    color: #e7f1fb;
    font-size: 0.73rem;
    letter-spacing: 0.09em;
    text-transform: uppercase;
    border: 1px solid #2a3643;
    background: linear-gradient(180deg, #19222d, #121a23);
    border-radius: 999px;
    padding: 4px 10px 3px;
    line-height: 1.2;
}

.app-footer-track-name {
    color: #e4edf7;
    font-size: 0.76rem;
    letter-spacing: 0.03em;
    font-weight: 600;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    flex: 0 1 auto;
    min-width: 0;
}

.app-footer-track {
    min-width: 0;
}

.app-footer-analysis {
    justify-self: end;
}

.app-footer-track-details {
    display: flex;
    align-items: baseline;
    gap: 10px;
    min-width: 0;
    overflow: hidden;
}

.app-footer-meta {
    display: inline-flex;
    align-items: baseline;
    gap: 8px;
    min-width: 0;
    overflow: hidden;
    white-space: nowrap;
}

.app-footer-meta-entry {
    color: #a0acb9;
    font-size: 0.66rem;
    letter-spacing: 0.03em;
    line-height: 1.2;
    white-space: nowrap;
}

.app-footer-meta-label {
    color: #c8d4e0;
    font-weight: 600;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    font-size: 0.6rem;
}

.app-footer-meta-value {
    color: #93a0ad;
    font-weight: 400;
}

.left-panel {
    min-height: 0;
    border-right: 1px solid var(--border);
    background: linear-gradient(180deg, #0f1216, #0c0f13);
    padding: 8px;
    display: grid;
    gap: 7px;
    align-content: start;
    overflow: auto;
}

.panel-block {
    border: 1px solid var(--border-soft);
    background: linear-gradient(180deg, #171b20, #13171b);
    border-radius: 2px;
    padding: 8px;
}

.panel-block h2 {
    margin: 0 0 6px;
    font-family: "Rajdhani", sans-serif;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    font-size: 0.83rem;
    color: #bcc4cd;
}

.muted-note {
    margin: 6px 0 0;
    color: var(--muted);
    font-size: 0.73rem;
    line-height: 1.3;
}

.error-text {
    margin: 6px 0 0;
    color: var(--danger);
    font-size: 0.73rem;
}

.history-stack {
    padding-top: 8px;
}

.history-empty {
    margin: 0;
    color: #7d8793;
    font-size: 0.72rem;
}

.history-list {
    display: grid;
    gap: 4px;
    max-height: 180px;
    overflow: auto;
    padding-right: 2px;
}

.history-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 8px;
    text-align: left;
    min-width: 0;
    overflow: hidden;
}

.history-item span {
    flex: 1;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    color: #a5adb8;
    font-size: 0.72rem;
    letter-spacing: 0.01em;
}

.history-item small {
    color: #7f8894;
    font-size: 0.64rem;
    letter-spacing: 0.03em;
    flex-shrink: 0;
}

.history-item.is-active {
    border-color: #4a7ea2;
    background: linear-gradient(180deg, #26323e, #1d2731);
}

.history-item.is-active span {
    color: #c4d9eb;
}

.primary-btn,
button {
    width: 100%;
    border: 1px solid #3a4048;
    border-radius: 2px;
    padding: 7px 8px;
    color: #d4dae1;
    background: linear-gradient(180deg, #222933, #1a2027);
    font: inherit;
    font-size: 0.78rem;
    font-weight: 500;
    letter-spacing: 0.02em;
    cursor: pointer;
    transition:
        border-color 120ms ease,
        background 120ms ease,
        opacity 120ms ease;
}

.primary-btn {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
}

.primary-btn-label {
    line-height: 1;
}

.spinner {
    width: 12px;
    height: 12px;
    border-radius: 999px;
    border: 2px solid rgba(6, 18, 25, 0.28);
    border-top-color: #081219;
    animation: spin 700ms linear infinite;
    flex-shrink: 0;
}

.spinner-secondary {
    border-color: rgba(214, 227, 240, 0.35);
    border-top-color: #e7f1fb;
}

.loading-btn {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
}

.primary-btn {
    color: #081219;
    border-color: #74bce9;
    background: linear-gradient(180deg, #8ad2ff, #5ca9da);
}

button:hover:not(:disabled),
.primary-btn:hover:not(:disabled) {
    border-color: #5d93b5;
    background: linear-gradient(180deg, #2a313b, #20262d);
}

.primary-btn:hover:not(:disabled) {
    background: linear-gradient(180deg, #9adbff, #66b1df);
}

button:disabled,
.primary-btn:disabled {
    opacity: 0.45;
    cursor: not-allowed;
}

.app-footer-value.is-loading::before {
    content: "";
    display: inline-block;
    width: 8px;
    height: 8px;
    border: 1px solid rgba(203, 223, 245, 0.45);
    border-top-color: #e7f1fb;
    border-radius: 999px;
    margin-right: 6px;
    animation: spin 700ms linear infinite;
    vertical-align: -1px;
}

.meta-list {
    margin: 0;
    display: grid;
    gap: 6px;
}

.meta-list div {
    display: grid;
    gap: 1px;
}

.meta-list dt {
    font-size: 0.62rem;
    text-transform: uppercase;
    letter-spacing: 0.09em;
    color: #8a929d;
}

.meta-list dd {
    margin: 0;
    font-size: 0.78rem;
    color: #d0d7df;
    word-break: break-all;
}

.controls .button-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 6px;
}

.controls .button-grid button:first-child {
    grid-column: 1 / -1;
}

.cue-row {
    margin-top: 6px;
    display: grid;
    gap: 6px;
    grid-template-columns: 1fr 1fr;
}

.slider-label {
    display: grid;
    gap: 6px;
    color: #9aa2ac;
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
}

input[type="range"] {
    width: 100%;
    appearance: none;
    height: 7px;
    border-radius: 1px;
    background:
        linear-gradient(90deg, var(--accent), var(--accent)) no-repeat,
        #2a3138;
    background-size: 0% 100%;
    outline: none;
}

input[type="range"]::-webkit-slider-thumb {
    appearance: none;
    height: 12px;
    width: 4px;
    border-radius: 1px;
    border: 0;
    background: #edf5ff;
}

input[type="range"]::-moz-range-thumb {
    height: 12px;
    width: 4px;
    border-radius: 1px;
    border: 0;
    background: #edf5ff;
}

.wave-panel {
    min-height: 0;
    padding: 8px;
    display: flex;
    flex-direction: column;
    gap: 6px;
    overflow: hidden;
}

.wave-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 8px;
    border: 1px solid var(--border-soft);
    background: linear-gradient(180deg, #171b20, #12161b);
    padding: 6px 8px;
}

.wave-header h2 {
    margin: 0;
    font-family: "Rajdhani", sans-serif;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-size: 0.9rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.time-readout {
    display: flex;
    align-items: baseline;
    gap: 6px;
}

.time-readout strong {
    color: var(--warn);
    font-family:
        "IBM Plex Mono", ui-monospace, SFMono-Regular, Menlo, monospace;
    font-size: 1.08rem;
    letter-spacing: 0;
    display: inline-block;
    min-width: 10ch;
    text-align: right;
    font-variant-numeric: tabular-nums;
    font-feature-settings: "tnum" 1;
}

.time-readout span {
    color: var(--muted);
    font-size: 0.76rem;
    font-family:
        "IBM Plex Mono", ui-monospace, SFMono-Regular, Menlo, monospace;
    letter-spacing: 0;
    display: inline-block;
    min-width: 10ch;
    text-align: left;
    font-variant-numeric: tabular-nums;
    font-feature-settings: "tnum" 1;
}

.timeline-mode-switch {
    margin-left: auto;
    display: inline-flex;
    border: 1px solid #35414c;
    border-radius: 2px;
    overflow: hidden;
}

.timeline-mode-switch button {
    width: auto;
    min-width: 88px;
    border: 0;
    border-right: 1px solid #35414c;
    border-radius: 0;
    padding: 5px 8px;
    font-size: 0.66rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: #9fa9b6;
    background: linear-gradient(180deg, #1e242d, #181d24);
}

.timeline-mode-switch button:last-child {
    border-right: 0;
}

.timeline-mode-switch button.is-active {
    color: #07131b;
    background: linear-gradient(180deg, #8bd4ff, #61aede);
}

.waveform-zone {
    position: relative;
    border: 1px solid #2a3038;
    background: #020407;
    flex: 0 1 clamp(210px, 44vh, 360px);
    min-height: 0;
    overflow: hidden;
    touch-action: none;
}

.wave-canvas,
.overview-canvas {
    width: 100%;
    height: 100%;
    display: block;
}

.wave-overlay-canvas {
    position: absolute;
    inset: 0;
    pointer-events: none;
}

.wave-overlay {
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
    font-size: 0.8rem;
    color: #8d95a0;
    background: rgba(6, 10, 14, 0.72);
}

.overview-strip {
    position: relative;
    flex: 0 0 36px;
    border: 1px solid #2a3038;
    background: #04070b;
    overflow: hidden;
    cursor: ew-resize;
}

.overview-overlay-canvas {
    position: absolute;
    inset: 0;
    pointer-events: none;
}

.wave-footer {
    display: flex;
    justify-content: space-between;
    gap: 10px;
    align-items: center;
    border: 1px solid var(--border-soft);
    background: linear-gradient(180deg, #171b20, #12161b);
    padding: 6px 8px;
}

.footer-stats {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    color: #959eaa;
    font-size: 0.74rem;
    text-transform: uppercase;
    letter-spacing: 0.07em;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

@media (max-width: 1080px) {
    .workspace {
        grid-template-columns: 1fr;
    }

    .left-panel {
        border-right: 0;
        border-bottom: 1px solid var(--border);
    }
}

@media (max-width: 760px) {
    .app-shell {
        padding: 0;
    }

    .top-bar {
        height: auto;
        flex-direction: column;
        align-items: flex-start;
        gap: 6px;
    }

    .wave-footer {
        grid-template-columns: 1fr;
    }

    .app-footer {
        grid-template-columns: 1fr;
        gap: 4px;
    }

    .app-footer-analysis {
        justify-self: start;
    }

    .app-footer-label {
        min-width: 42px;
    }

    .overview-strip {
        flex-basis: 30px;
    }

    .waveform-zone {
        flex-basis: clamp(170px, 34vh, 260px);
    }
}
